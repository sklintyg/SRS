<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!--
    === Övergripande ===
    De namespace som anges kan komma att ändras
    Tjänstekontraktets innehållsstruktur kallas just nu för srstjanstegranssnitt
    Versionsattributet avser tjänstekontraktets version
    Konsument-id är till för att kunna logga anrop och svar per enhet, i syfte att kunna skapa underlag för uppföljning. Behöver inte implementeras än.

    **Vilken informations som finns var**
    Tjänstekontraktets versionsnummer = srstjanstegranssnitt.version
    Konsument-id = srstjanstegranssnitt.konsument-id.extension
    
    === Indata ===
    Indata kan innehålla en eller flera indivdfaktorer (en individfaktorstruktur per individ)
    Per individfaktorstruktur kan varje individ ha en eller flera diagnoser
    Utdatafilter är boolean och sätts till true för de
    informationsmängder som ska ingå i utdata. Samma informationsmängder för alla bedömningsunderlag i utdata

    **Vilken informations som finns var**
    personnummer/samordningsnummer = srstjanstegranssnitt.indata.individfaktorer.person-id
    diagnoskod (ICD-10-SE) = srstjanstegranssnitt.indata.individfaktorer.diagnos.cv.code
    filter för risksignal = srstjanstegranssnitt.indata.utdatafilter.risksignal
    filter för nationell statistik = srstjanstegranssnitt.indata.utdatafilter.nationellstatistik
    filter för prediktion = srstjanstegranssnitt.indata.utdatafilter.prediktion
    filter för information från fmb = srstjanstegranssnitt.indata.utdatafilter.fmbinformation
    filter för insatsrekommendationer = srstjanstegranssnitt.indata.utdatafilter.rehabinsatser

    === utdata ===
    Utdata innehåller ett bedömningsunderlag per person
    Bedömningsunderlag innehåller de informationsmängder som satts till true i indatats utdatafilter, en struktur per vald informationsmängd
    Varje informationsmängd innehåller samtliga sina attribut per diagnoskod
    Risksignal och Prediktion kan dessutom innehålla en struktur med attribut som avser en sammanvägning av samtliga diagnoser (samsjuklighet) med diagnoskoden ALLICDCODES
    Varje informationsmängd innehåller statusattribut som är en del av felhanteringen. Koder ska tas fram. Status kan implementeras senare

    **Vilken informations som finns var**
    personnummer/samordningsnummer = srstjanstegranssnitt.utdata.bedomningsunderlag.person-id

    prediktion, diagnoskod = srstjanstegranssnitt.utdata.bedomningsunderlag.prediktion.diagnos.cv.code
    prediktion, sjukskrivningslängd = srstjanstegranssnitt.utdata.bedomningsunderlag.prediktion.diagnos.sskrlangd
    prediktion, sjukskrivningsomfattning = srstjanstegranssnitt.utdata.bedomningsunderlag.prediktion.diagnos.sskromfattning
    prediktion, förklaringsinformation = srstjanstegranssnitt.utdata.bedomningsunderlag.prediktion.diagnos.forklaringsinformation
    prediktion, status = srstjanstegranssnitt.utdata.bedomningsunderlag.prediktion.diagnos.status

    FMB, diagnoskod = srstjanstegranssnitt.utdata.bedomningsunderlag.fmb.diagnos.cv.code
    FMB, rekommenderad maxlängd för sjukskrivning = srstjanstegranssnitt.utdata.bedomningsunderlag.fmb.diagnos.maxlangd
    FMB, beskrivning av FMB:s rekommendation = srstjanstegranssnitt.utdata.bedomningsunderlag.fmb.diagnos.beskrivning
    FMB, status = srstjanstegranssnitt.utdata.bedomningsunderlag.fmb.diagnos.status

    *** Frågor och svar ***
     - Vilka namespace ska användas? **Svar: börja med rehabilitation, utred vidare
     - Ska root och extension anges för person-id, eller räcker det att ange personnr/samordningsnr? Ska det vara samma för in- och utdata? **Svar: inget kodverk
     - Vilka koder ska användas för status? **Svar: inledningsvis vad som helst, på sikt ett kodverk
   **************
-->

<ns2:GetSRSInformation
    xmlns="urn:riv:clinicalprocess:healthcond:rehabilitation:2"
    xmlns:ns2="urn:riv:clinicalprocess:healthcond:rehabilitation:GetSRSInformation:2"
    xmlns:ns3="urn:riv:clinicalprocess:healthcond:rehabilitation:types:2">
  <ns2:srstjanstegranssnitt>
    <version>0.1</version>
    <konsument-id>
      <ns3:root>1.2.752.129.2.1.4.1</ns3:root>
      <ns3:extension>SE2321000016-H489</ns3:extension>
    </konsument-id>

    <indata>
      <individfaktorer>
	<person-id>191212121212</person-id>
	<diagnos>
          <ns3:cv>
            <ns3:code>F438A</ns3:code>
            <ns3:codeSystem>1.2.752.116.1.1.1.1.3</ns3:codeSystem>
          </ns3:cv>
	</diagnos>
      </individfaktorer>
      <utdatafilter>
        <ns3:risksignal>false</ns3:risksignal>
        <ns3:nationellstatistik>false</ns3:nationellstatistik>
        <ns3:prediktion>true</ns3:prediktion>
        <ns3:fmbinformation>true</ns3:fmbinformation>
        <ns3:rehabinsatser>false</ns3:rehabinsatser>
      </utdatafilter>
    </indata>

    <utdata>
        <bedomningsunderlag>
	  <person-id>191212121212</person-id>
	  <prediktion>
	    <diagnos>
              <ns3:cv>
		<ns3:code>F438A</ns3:code>
		<ns3:codeSystem>1.2.752.116.1.1.1.1.3</ns3:codeSystem>
              </ns3:cv>
              <ns3:sskrlangd>120</ns3:sskrlangd>
              <ns3:sskromfattning>100</ns3:sskromfattning>
              <ns3:forklaringsinformation>Ålder och diagnos har störst inverkan på prediktionen</ns3:forklaringsinformation>
              <ns3:status>0</ns3:status>
	    </diagnos>
	  </prediktion>
	  <fmb>
	    <diagnos>
              <ns3:cv>
		<ns3:code>F438A</ns3:code>
		<ns3:codeSystem>1.2.752.116.1.1.1.1.3</ns3:codeSystem>
              </ns3:cv>
              <ns3:maxlangd>180</ns3:maxlangd>
              <ns3:beskrivning>Återhämtning, med hjälp av aktiv specialiserad rehabilitering, och successiv återgång i arbete, tar inte sällan mer än 6 månader och i vissa fall upp till ett år eller längre</ns3:beskrivning>
              <ns3:status>0</ns3:status>
	    </diagnos>
	  </fmb>
        </bedomningsunderlag>
    </utdata>
  </ns2:srstjanstegranssnitt>
</ns2:GetSRSInformation>
